# IRR Prefix Change Detection & Ticket Automation Configuration
# =============================================================

# BGPQ4 settings
# BGPQ4 queries IRR databases via a single command. RADB mirrors all 5 RIRs
# (RIPE, ARIN, APNIC, LACNIC, AFRINIC), so querying RADB alone is sufficient.
# BGPQ4 handles AS-SET expansion and prefix aggregation automatically.
bgpq4:
  cmd: ["wsl", "bgpq4"]      # Command to invoke bgpq4 (via WSL on Windows)
  source: "RADB"              # IRR source (-S flag). RADB mirrors all RIRs.
  aggregate: true             # Aggregate prefixes (-A flag)
  timeout_seconds: 120        # Subprocess timeout

# API Proxy Mode (optional)
# When set, the CLI will call this deployed API for all IRR queries
# instead of running bgpq4 locally.
# Useful when bgpq4 is not available on the local machine.
# Can also be set via IRR_API_URL environment variable.
# api_url: "https://your-deployed-api.example.com"

# Targets to monitor
# Supports ASNs (e.g., AS15169) and AS-SETs (e.g., AS-GOOGLE).
# BGPQ4 expands AS-SETs automatically to fetch all member prefixes.
targets:
  - AS15169    # Google
  - AS16509    # Amazon
  - AS8075     # Microsoft

# Database settings
database:
  # Path to SQLite database file
  path: "./data/irr.sqlite"

# AT&T Ticketing API settings
# Credentials should be provided via environment variables
ticketing:
  base_url: "${ABC_BASE_URL}"     # Set ABC_BASE_URL environment variable
  api_token: "${ABC_TOKEN}"       # Set ABC_TOKEN environment variable
  timeout_seconds: 30
  max_retries: 3

# Logging settings
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: "INFO"
  # Log format: "json" for structured logging, "text" for human-readable
  format: "json"
  # Optional log file path (leave commented for console only)
  # file: "./logs/irr-automation.log"

# Diff settings
diff:
  # Compare against snapshot from N hours ago
  # Default: 24 hours (daily comparison)
  lookback_hours: 24
